function getLocation(callback) {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      function (position) {
        const lat = position.coords.latitude.toFixed(5);
        const lon = position.coords.longitude.toFixed(5);
        const url = `https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${lat}&lon=${lon}`;
        fetch(url)
          .then(response => response.json())
          .then(data => {
            if (data && data.address) {
              const address = `${data.address.city || data.address.town || data.address.village || ''}, ${data.address.state || ''}, ${data.address.country || ''}`;
              callback(address.trim());
            } else {
              callback(`خط العرض: ${lat}، خط الطول: ${lon}`);
            }
          })
          .catch(() => {
            callback(`خط العرض: ${lat}، خط الطول: ${lon}`);
          });
      },
      function () {
        callback("لم يتم السماح بالموقع");
      }
    );
  } else {
    callback("الموقع غير مدعوم في هذا المتصفح");
  }
}