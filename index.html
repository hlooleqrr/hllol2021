<!-- ابدأ نسخ كل شيء من هنا -->
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>سرعة تملك العقار والحلول التمويلية المتكاملة</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; }
    body, html {
      margin: 0; padding: 0; height: 100%;
      font-family: 'Tajawal', sans-serif;
      background: #f9fafb; color: #004d40;
      display: flex; flex-direction: column;
      min-height: 100vh;
    }
    .container {
      flex: 1;
      max-width: 650px;
      margin: 30px auto;
      padding: 30px 40px;
      background: #fff;
      border: 3px solid #004d40;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0, 77, 64, 0.25);
      display: flex; flex-direction: column;
    }
    .page { display: none; flex-direction: column; }
    .page.active { display: flex; }
    header {
      text-align: center;
      margin-bottom: 30px;
      padding: 25px 30px;
      background: linear-gradient(135deg, #004d40, #00796b);
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.12);
    }
    header h1 {
      font-size: 2.4rem;
      font-weight: 900;
      color: #e0f2f1;
      margin: 0;
    }
    header p {
      font-size: 1.2rem;
      color: #a7d3cb;
      margin-top: 12px;
      font-weight: 600;
    }
    label {
      font-weight: 700;
      margin-top: 18px;
      font-size: 1.1rem;
    }
    input[type=text] {
      width: 100%;
      padding: 14px 18px;
      margin: 8px 0 25px;
      border: 2px solid #009688;
      border-radius: 8px;
      font-size: 1rem;
      transition: 0.3s;
    }
    input:focus {
      outline: none;
      border-color: #004d40;
      box-shadow: 0 0 6px #004d4088;
    }
    button {
      background-color: #00796b;
      color: #fff;
      border: none;
      padding: 14px 30px;
      font-size: 1.2rem;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      align-self: center;
      min-width: 150px;
    }
    button:hover:not(:disabled) { background-color: #004d40; }
    button:disabled { background-color: #b2dfdb; cursor: not-allowed; }
    .contract-text {
      border: 2px solid #009688;
      padding: 25px;
      background: #f6fdfd;
      border-radius: 12px;
      line-height: 1.6;
      white-space: pre-wrap;
      font-size: 1rem;
      max-height: 400px;
      overflow-y: auto;
    }
    .btn-approve { background-color: #2e7d32; }
    .btn-approve:hover { background-color: #145214; }
    .btn-reject { background-color: #c62828; }
    .btn-reject:hover { background-color: #7b1a1a; }
    .notice {
      background: #b2dfdb;
      padding: 15px;
      border-radius: 10px;
      font-weight: bold;
      color: #004d40;
      margin-top: 20px;
      text-align: center;
    }
    .error-msg {
      color: #c62828;
      text-align: center;
      font-weight: bold;
    }
    footer {
      background: #fff0f0;
      color: #d32f2f;
      padding: 15px;
      text-align: center;
      font-weight: bold;
      border-top: 2px solid #ddd;
    }
    @media (max-width: 480px) {
      .container { margin: 15px; padding: 20px; }
      header h1 { font-size: 2rem; }
      header p { font-size: 1rem; }
      button { font-size: 1rem; }
    }
  </style>
</head>
<body>
<div class="container">

  <!-- صفحة 1 -->
  <section id="page1" class="page active">
    <header>
      <h1>سرعة تملك العقار<br>والحلول التمويلية المتكاملة</h1>
      <p>نرحب بك عميلنا العزيز</p>
    </header>
    <p style="text-align:center; font-weight:bold; font-size:1.2rem;">نبرم معك هذا العقد<br><br>بسم الله الرحمن الرحيم</p>
    <button id="startBtn">ابدأ</button>
  </section>

  <!-- صفحة 2 -->
  <section id="page2" class="page">
    <label>الاسم الكريم:</label>
    <input type="text" id="fullName" placeholder="اكتب اسمك الكامل" />
    <label>السجل المدني:</label>
    <input type="text" id="idNumber" placeholder="أدخل رقم السجل المدني (10 أرقام)" maxlength="10" />
    <button id="toContractBtn" disabled>التالي ➔</button>
  </section>

  <!-- صفحة 3 -->
  <section id="page3" class="page">
    <div class="contract-text" id="contractText"></div>
    <button id="toApproveBtn" class="btn-approve">✓ موافق على العقد</button>
  </section>

  <!-- صفحة 4 -->
  <section id="page4" class="page">
    <p style="font-weight:bold; text-align:center;">الرجاء تأكيد بياناتك لإتمام العقد</p>
    <label>رقم الهوية:</label>
    <input type="text" id="confirmId" maxlength="10" />
    <label>اكتب كلمة (موافق):</label>
    <input type="text" id="approvalText" placeholder="موافق" />
    <div class="error-msg" id="errorMsg"></div>
    <div id="approvalNotice" class="notice" style="display:none;"></div>
    <div style="text-align:center; margin-top:20px;">
      <button id="finalizeBtn" class="btn-approve">إتمام العقد</button>
      <button id="rejectBtn" class="btn-reject">رفض العقد</button>
    </div>
    <div id="rejectMsg" class="error-msg" style="display:none;">تم رفض العقد بشكل رسمي. يرجى التواصل مع الممثل القانوني. شكرًا.</div>
  </section>

  <!-- صفحة 5 -->
  <section id="page5" class="page">
    <h2 style="color:#2e7d32; text-align:center; margin-top: 50px;">تم إبرام العقد بنجاح ✅</h2>
  </section>

</div>
<footer id="footer">⚠️ تنبيه: هذا العقد يُعد سندًا تنفيذيًا كما نصّت عليه المادة (9) من نظام التعاملات الإلكترونية</footer>

<script>
  const pages = [...document.querySelectorAll('.page')];
  const showPage = id => {
    pages.forEach(p => p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  };
  setInterval(() => {
    const now = new Date();
    const days = ['الأحد','الاثنين','الثلاثاء','الأربعاء','الخميس','الجمعة','السبت'];
    const day = days[now.getDay()];
    const date = now.toLocaleDateString('ar-SA');
    const time = now.toLocaleTimeString('ar-SA', { hour12: false });
    document.getElementById('footer').textContent = `⚠️ تنبيه: هذا العقد يُعد سندًا تنفيذيًا كما نصّت عليه المادة (9) من نظام التعاملات الإلكترونية
اليوم: ${day} - التاريخ: ${date} - الوقت: ${time}`;
  }, 1000);

  document.getElementById('startBtn').onclick = () => showPage('page2');

  const fullName = document.getElementById('fullName');
  const idNumber = document.getElementById('idNumber');
  const toContractBtn = document.getElementById('toContractBtn');

  [fullName, idNumber].forEach(input => input.addEventListener('input', () => {
    toContractBtn.disabled = !(fullName.value.trim() && /^\d{10}$/.test(idNumber.value.trim()));
  }));

  document.getElementById('toContractBtn').onclick = () => {
    window.clientName = fullName.value.trim();
    window.clientId = idNumber.value.trim();
    const now = new Date();
    const approvalDate = new Date(now.getTime() - 21 * 60000);
    const days = ['الأحد','الاثنين','الثلاثاء','الأربعاء','الخميس','الجمعة','السبت'];
    const formatDate = d => `اليوم: ${days[d.getDay()]} - التاريخ: ${d.toLocaleDateString('ar-SA')} - الوقت: ${d.toLocaleTimeString('ar-SA', { hour12: false })}`;
    document.getElementById('contractText').textContent = 
`بسم الله الرحمن الرحيم

المملكة العربية السعودية
الوساطة العقارية والتسويق
ترخيص: 1100042624
الرياض

⸻

عقد اتفاقية إنهاء إجراءات تمويل عقاري من جهة تمويلية

تم بعون الله وتوفيقه في:

${formatDate(approvalDate)}

⸻

الطرف الأول:
شركة الوساطة العقارية والتسويق
ويمثلها الأستاذ: نايف المطيري
بصفته: مدير الإدارة

⸻

الطرف الثاني:
الاسم: ${window.clientName}
رقم الهوية: ${window.clientId}
العنوان: ___________
تاريخ الميلاد: ___________
رقم الجوال: ___________

⸻

التمهيد:
... [تمهيد العقد] ...

⸻

البنود:
1. يعتبر التمهيد جزءاً لا يتجزأ من العقد.
2. الطرف الأول ينجز الإجراءات لصالح الطرف الثاني.
3. يدفع الطرف الثاني 2.5% من قيمة العقار + 500 ريال رسوم عقد.
4. إذا فشلت الصفقة بسبب الطرف الأول يعاد المبلغ.
5. يلتزم الطرف الثاني بدقة البيانات.
6. لا يحق للطرف الثاني التواصل مع البنك مباشرة.
7. يحق للطرف الأول تفويض من يراه.
8. إذا انسحب الطرف الثاني لا يسترد المبلغ.
9. العقد ساري لمدة 60 يوماً.
10. جهة التقاضي: الرياض.
11. العقد موقع إلكترونيًا ويُعد ملزمًا.

⸻

تمت موافقة الطرف الأول بتاريخ أعلاه.
يرجى المتابعة لإتمام العقد من الطرف الثاني.`;
    showPage('page3');
  };

  document.getElementById('toApproveBtn').onclick = () => showPage('page4');

  document.getElementById('finalizeBtn').onclick = () => {
    const confirmId = document.getElementById('confirmId').value.trim();
    const approvalText = document.getElementById('approvalText').value.trim();
    if (confirmId !== window.clientId || approvalText !== 'موافق') {
      document.getElementById('errorMsg').textContent = 'تأكد من مطابقة الهوية وكتابة "موافق"';
    } else {
      document.getElementById('errorMsg').textContent = '';
      document.getElementById('approvalNotice').style.display = 'block';
      document.getElementById('approvalNotice').textContent = `✅ تم تأكيد بياناتك بنجاح يا ${window.clientName}`;
      setTimeout(() => showPage('page5'), 2000);
    }
  };

  document.getElementById('rejectBtn').onclick = () => {
    document.getElementById('rejectMsg').style.display = 'block';
  };
</script>
</body>
</html>
<!-- انتهى النسخ -->