<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>سرعة تملك العقار والحلول التمويلية المتكاملة</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; }
    body, html {
      margin: 0; padding: 0;
      font-family: 'Tajawal', sans-serif;
      background: #f9fafb;
      color: #004d40;
    }
    .container {
      max-width: 700px;
      margin: auto;
      padding: 20px;
      background: white;
      border: 2px solid #004d40;
      border-radius: 12px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    }
    .page { display: none; }
    .page.active { display: block; }
    header {
      background: linear-gradient(to right, #004d40, #00796b);
      color: white;
      padding: 20px;
      border-radius: 10px;
      text-align: center;
    }
    header h1 { margin: 0; font-size: 1.8rem; }
    header p { margin: 5px 0 0; font-size: 1.2rem; }
    input, button {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border-radius: 8px;
      font-size: 1rem;
      font-family: inherit;
    }
    input { border: 2px solid #009688; }
    input:focus { border-color: #004d40; outline: none; }
    button {
      background: #00796b;
      color: white;
      border: none;
      font-weight: bold;
      cursor: pointer;
    }
    button:hover { background: #004d40; }
    .btn-approve { background: #2e7d32; }
    .btn-reject { background: #c62828; }
    .contract-box {
      border: 2px solid #009688;
      padding: 15px;
      background: #f6fdfd;
      border-radius: 10px;
      max-height: 400px;
      overflow-y: auto;
      white-space: pre-wrap;
      font-size: 1rem;
      margin-bottom: 20px;
    }
    footer {
      text-align: center;
      padding: 10px;
      font-size: 0.9rem;
      color: #d32f2f;
      border-top: 1px solid #ccc;
      margin-top: 30px;
    }
  </style>
</head>
<body>
<div class="container">
  <!-- صفحة 1 -->
  <section class="page active" id="page1">
    <header>
      <h1>سرعة تملك العقار<br>والحلول التمويلية المتكاملة</h1>
      <p>نرحب بك عميلنا العزيز</p>
    </header>
    <p style="text-align:center; font-weight:bold; font-size:1.2rem;">نبرم معك هذا العقد<br><br>بسم الله الرحمن الرحيم</p>
    <button onclick="goToPage(2)">ابدأ</button>
  </section>

  <!-- صفحة 2 -->
  <section class="page" id="page2">
    <label>الاسم الكريم:</label>
    <input type="text" id="fullName" placeholder="اكتب اسمك الكامل" />
    <label>السجل المدني:</label>
    <input type="text" id="idNumber" maxlength="10" placeholder="أدخل رقم الهوية" />
    <button id="toContract" disabled>التالي ➔</button>
  </section>

  <!-- صفحة 3 -->
  <section class="page" id="page3">
    <div class="contract-box" id="contractContent"></div>
    <button class="btn-approve" onclick="goToPage(4)">✓ موافق على العقد</button>
    <button class="btn-reject" onclick="rejectContract()">✗ رفض العقد</button>
    <p id="rejectNotice" style="color:#c62828; font-weight:bold; display:none;">تم رفض العقد. يرجى التواصل مع الممثل القانوني. شكرًا.</p>
  </section>

  <!-- صفحة 4 -->
  <section class="page" id="page4">
    <p id="approvalTime" style="background:#e0f2f1; padding:10px; border-radius:8px;"></p>
    <p style="font-weight:bold;">الرجاء تأكيد بياناتك لإتمام العقد</p>
    <label>رقم الهوية:</label>
    <input type="text" id="confirmId" maxlength="10" />
    <label>اكتب كلمة (موافق):</label>
    <input type="text" id="approvalWord" placeholder="موافق" />
    <button onclick="finalizeContract()">إتمام العقد</button>
    <p id="errorMsg" style="color:#c62828; font-weight:bold;"></p>
  </section>

  <!-- صفحة 5 -->
  <section class="page" id="page5">
    <h2 style="color:#2e7d32;">تم إبرام العقد بنجاح ✅</h2>
    <p id="finalTime" style="font-weight:bold;"></p>
  </section>
</div>

<footer id="footerText">⚠️ هذا العقد يُعد سندًا تنفيذيًا وفق المادة 9 من نظام التعاملات الإلكترونية</footer>

<script>
  const pages = document.querySelectorAll('.page');
  const nameInput = document.getElementById('fullName');
  const idInput = document.getElementById('idNumber');
  const toContractBtn = document.getElementById('toContract');
  const contractBox = document.getElementById('contractContent');

  function goToPage(num) {
    pages.forEach(p => p.classList.remove('active'));
    document.getElementById('page' + num).classList.add('active');
  }

  nameInput.addEventListener('input', validateInputs);
  idInput.addEventListener('input', validateInputs);

  function validateInputs() {
    const name = nameInput.value.trim();
    const id = idInput.value.trim();
    toContractBtn.disabled = !(name && /^\d{10}$/.test(id));
  }

  toContractBtn.onclick = () => {
    const name = nameInput.value.trim();
    const id = idInput.value.trim();
    const now = new Date();
    const approvalDate = new Date(now.getTime() - 21 * 60000);
    const options = { weekday: 'long', year: 'numeric', month: 'numeric', day: 'numeric' };
    const approvalStr = approvalDate.toLocaleString('ar-SA', options) + ' - الساعة ' + approvalDate.toLocaleTimeString('ar-SA');

    // البنود كاملة
    contractBox.textContent =
`بسم الله الرحمن الرحيم

المملكة العربية السعودية
الوساطة العقارية والتسويق
ترخيص: 1100042624
الرياض

عقد اتفاقية إنهاء إجراءات تمويل عقاري من جهة تمويلية

تم بعون الله وتوفيقه في:
${approvalStr}

الطرف الأول:
شركة الوساطة العقارية والتسويق
ويمثلها الأستاذ: نايف المطيري
بصفته: ممثل إدراة

الطرف الثاني:
الاسم: ${name}
رقم الهوية: ${id}

التمهيد:
حيث إن الطرف الأول مرخص بالوساطة العقارية، ويعمل على تسهيل إجراءات التمويل العقاري وفق الأنظمة، ولدى الطرف الثاني رغبة في تملك عقار معين.

البنود:
1. يعتبر التمهيد جزءًا لا يتجزأ من هذا العقد.
2. يقوم الطرف الأول بكافة الإجراءات المتعلقة بإتمام التمويل لصالح الطرف الثاني.
3. يلتزم الطرف الثاني بدفع نسبة 2.5% من قيمة العقار + 500 ريال رسوم عقد.
4. في حال فشل التمويل لأسباب خارج إرادة الطرف الثاني، تُعاد المبالغ المدفوعة باستثناء الرسوم الرسمية.
5. يلتزم الطرف الثاني بتقديم بيانات صحيحة ودقيقة.
6. لا يحق للطرف الثاني التواصل مع الجهات الممولة بدون علم الطرف الأول.
7. يحق للطرف الأول تفويض من يراه مناسبًا لاستكمال الإجراءات.
8. في حال تراجع الطرف الثاني عن رغبته، لا تُسترد المبالغ.
9. مدة هذا العقد 60 يومًا من تاريخ التوقيع.
10. تختص محاكم الرياض بأي نزاع يتعلق بهذا العقد.
11. إقرار الطرف الثاني بفهمه الكامل لكافة البنود.
12. هذا العقد موقع إلكترونيًا وملزم للطرفين.

تمت موافقة الطرف الأول بتاريخ أعلاه.
`;

    document.getElementById('approvalTime').textContent = `تمت موافقة الطرف الأول من قبل الاستاذ/نايف المطيري بتاريخ: ${approvalStr}`;
    goToPage(3);
  };

  function rejectContract() {
    document.getElementById('rejectNotice').style.display = 'block';
  }

  function finalizeContract() {
    const confirmId = document.getElementById('confirmId').value.trim();
    const approvalWord = document.getElementById('approvalWord').value.trim();
    const originalId = idInput.value.trim();

    if (confirmId !== originalId || approvalWord !== 'موافق') {
      document.getElementById('errorMsg').textContent = 'تأكد من إدخال رقم الهوية الصحيح وكتابة كلمة (موافق)';
      return;
    }

    const finalNow = new Date();
    const options = { weekday: 'long', year: 'numeric', month: 'numeric', day: 'numeric' };
    const fullTime = finalNow.toLocaleString('ar-SA', options) + ' - الوقت: ' + finalNow.toLocaleTimeString('ar-SA');
    document.getElementById('finalTime').textContent = `تم إبرام العقد في: ${fullTime}`;
    goToPage(5);
  }
</script>
</body>
</html>