<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>سرعة تملك العقار والحلول التمويلية المتكاملة</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Tajawal&display=swap');
  * {
    box-sizing: border-box;
  }
  body, html {
    margin: 0; padding: 0; height: 100%;
    font-family: 'Tajawal', sans-serif;
    background: #f9fafb;
    color: #004d40;
    display: flex;
    flex-direction: column;
  }
  .container {
    flex: 1;
    max-width: 600px;
    margin: auto;
    padding: 20px;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }
  header {
    text-align: center;
    margin-bottom: 15px;
  }
  header h1 {
    font-size: 2.4rem;
    font-weight: 700;
    color: #004d40;
    margin: 10px 0 5px;
  }
  header p {
    font-size: 1.1rem;
    font-weight: 500;
    color: #00796b;
  }
  .page {
    display: none;
    flex-direction: column;
  }
  .page.active {
    display: flex;
  }
  textarea, input[type=text], input[type=number] {
    width: 100%;
    font-size: 1rem;
    padding: 10px 12px;
    margin: 12px 0 20px;
    border-radius: 5px;
    border: 1.5px solid #009688;
    resize: vertical;
    font-family: 'Tajawal', sans-serif;
  }
  label {
    font-weight: 600;
    font-size: 1.1rem;
  }
  button {
    background-color: #00796b;
    color: #fff;
    border: none;
    padding: 14px 25px;
    font-size: 1.2rem;
    border-radius: 7px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    align-self: center;
    min-width: 140px;
    font-weight: 700;
  }
  button:hover:not(:disabled) {
    background-color: #004d40;
  }
  button:disabled {
    background-color: #b2dfdb;
    cursor: not-allowed;
  }
  footer {
    text-align: center;
    font-size: 0.9rem;
    color: #555;
    padding: 10px 0;
    border-top: 1px solid #ddd;
    background-color: #e0f2f1;
    font-weight: 600;
  }
  .contract-text {
    white-space: pre-line;
    font-size: 1rem;
    line-height: 1.5;
    max-height: 400px;
    overflow-y: auto;
    border: 1px solid #009688;
    padding: 15px;
    border-radius: 8px;
    background: #fafafa;
    margin-bottom: 15px;
  }
  .notice {
    background-color: #b2dfdb;
    border-radius: 6px;
    padding: 12px 15px;
    font-weight: 600;
    color: #004d40;
    margin-bottom: 15px;
    text-align: center;
    white-space: pre-line;
  }
  .error-msg {
    color: #d32f2f;
    font-weight: 700;
    margin-top: 10px;
    text-align: center;
  }
  @media (max-width: 480px) {
    header h1 {
      font-size: 1.8rem;
    }
    button {
      font-size: 1rem;
      padding: 12px 20px;
      min-width: 100px;
    }
  }
</style>
</head>
<body>

<div class="container">

  <!-- الصفحة 1 -->
  <section id="page1" class="page active" aria-label="الصفحة الأولى - مقدمة العقد">
    <header>
      <h1>سرعة تملك العقار والحلول التمويلية المتكاملة</h1>
      <p>نرحب بك عميلنا العزيز</p>
    </header>
    <p style="font-size:1.1rem; line-height:1.5; text-align:center; margin-bottom:30px;">
      نبرم معك هذا العقد<br><br>
      <strong>بسم الله الرحمن الرحيم</strong>
    </p>
    <button id="startBtn">التالي</button>
  </section>

  <!-- الصفحة 2 -->
  <section id="page2" class="page" aria-label="الصفحة الثانية - بيانات العميل">
    <label for="fullName">الاسم الكريم:</label>
    <input type="text" id="fullName" name="fullName" autocomplete="name" placeholder="اكتب اسمك الكريم" required />
    <label for="idNumber">السجل المدني:</label>
    <input type="text" id="idNumber" name="idNumber" placeholder="أدخل رقم السجل المدني (10 أرقام)" maxlength="10" pattern="\d{10}" title="رقم السجل المدني مكون من 10 أرقام" required />
    <button id="toContractBtn" disabled>التالي</button>
  </section>

  <!-- الصفحة 3 -->
  <section id="page3" class="page" aria-label="الصفحة الثالثة - عرض العقد">
    <div class="notice" id="noticeText"></div>
    <div class="contract-text" id="contractText" tabindex="0" aria-live="polite" aria-label="نص العقد">
    </div>
    <button id="toApproveBtn">موافق على العقد</button>
  </section>

  <!-- الصفحة 4 -->
  <section id="page4" class="page" aria-label="الصفحة الرابعة - الموافقة النهائية">
    <p style="font-weight:600; font-size:1.2rem; margin-bottom: 20px; text-align:center;" id="approvalPrompt">
      الرجاء تأكيد بياناتك لإتمام العقد
    </p>
    <label for="confirmId">رقم الهوية:</label>
    <input type="text" id="confirmId" name="confirmId" placeholder="أدخل رقم الهوية" maxlength="10" pattern="\d{10}" title="رقم الهوية مكون من 10 أرقام" required />
    <label for="approvalText">اكتب كلمة (موافق):</label>
    <input type="text" id="approvalText" name="approvalText" placeholder="موافق" required />
    <div class="error-msg" id="errorMsg" role="alert" aria-live="assertive"></div>
    <button id="finalizeBtn">إتمام العقد</button>
  </section>

  <!-- الصفحة 5 (النهائية) -->
  <section id="page5" class="page" aria-label="تم إبرام العقد">
    <h2 style="color:#00796b; text-align:center; margin-top: 40px;">تم إبرام العقد بنجاح ✅</h2>
  </section>

</div>

<footer aria-live="polite" aria-atomic="true" aria-relevant="text" id="footer">
  <!-- التاريخ والوقت يظهر هنا -->
</footer>

<script>
  const pages = [...document.querySelectorAll('.page')];
  const footer = document.getElementById('footer');

  function showPage(id) {
    pages.forEach(p => p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  function updateDateTime() {
    const now = new Date();
    const days = ['الأحد', 'الاثنين', 'الثلاثاء', 'الأربعاء', 'الخميس', 'الجمعة', 'السبت'];
    const dayName = days[now.getDay()];
    const date = now.toLocaleDateString('ar-SA', {year: 'numeric', month: '2-digit', day: '2-digit'});
    const time = now.toLocaleTimeString('ar-SA', {hour12: false});
    footer.textContent = `اليوم: ${dayName} - التاريخ: ${date} - الوقت: ${time}`;
  }
  setInterval(updateDateTime, 1000);
  updateDateTime();

  // الصفحة 1 -> 2
  document.getElementById('startBtn').addEventListener('click', () => {
    showPage('page2');
    document.getElementById('fullName').focus();
  });

  // تحقق الصفحة 2 (الاسم الكريم ورقم الهوية 10 أرقام)
  const fullNameInput = document.getElementById('fullName');
  const idNumberInput = document.getElementById('idNumber');
  const toContractBtn = document.getElementById('toContractBtn');

  function validatePage2() {
    const nameValid = fullNameInput.value.trim().length > 0;
    const idValid = /^\d{10}$/.test(idNumberInput.value.trim());
    toContractBtn.disabled = !(nameValid && idValid);
  }
  fullNameInput.addEventListener('input', validatePage2);
  idNumberInput.addEventListener('input', validatePage2);

  // الصفحة 2 -> 3
  toContractBtn.addEventListener('click', () => {
    if (toContractBtn.disabled) return;

    window.clientName = fullNameInput.value.trim();
    window.clientId = idNumberInput.value.trim();

    const now = new Date();
    const approvalDate = new Date(now.getTime() - 21 * 60000);
    const days = ['الأحد', 'الاثنين', 'الثلاثاء', 'الأربعاء', 'الخميس', 'الجمعة', 'السبت'];

    function formatDate(d) {
      const dayName = days[d.getDay()];
      const date = d.toLocaleDateString('ar-SA', {year: 'numeric', month: '2-digit', day: '2-digit'});
      const time = d.toLocaleTimeString('ar-SA', {hour12: false});
      return `اليوم: ${dayName} - التاريخ: ${date} - الوقت: ${time}`;
    }

    const contractText = 
`بسم الله الرحمن الرحيم

المملكة العربية السعودية
 الوساطة العقارية والتسويق
ترخيص: 1100042624
الرياض


⸻

عقد اتفاقية إنهاء إجراءات تمويل عقاري من جهة تمويلية

تم بعون الله وتوفيقه في يوم ………… الموافق ………… هـ، الموافق ………… م، الاتفاق بين كلٍ من:

⸻

الطرف الأول:

شركة  الوساطة العقارية والتسويق
ويمثلها في التوقيع على هذا العقد الأستاذ: نايف المطيري………………………………
بصفته:  مدير الادراة
ويُشار إليه في هذا العقد بـ (الطرف الأول)

⸻

الطرف الثاني:

الاسم: ${window.clientName}
رقم الهوية: ${window.clientId}
العنوان: 
تاريخ الميلاد: 
رقم الجوال: ………………………..

ويُشار إليه في هذا العقد بـ (الطرف الثاني)

⸻

التمهيد:

حيثُ أن الطرف الأول وساطة عقارية مرخصة بالوساطة العقارية وشراء وبيع العقارات، وتقوم بخدمة عملائها بتوفير العقار المناسب بناء على طلبهم، وتيسير حصولهم على تمويل مالي يمكنهم من تملّك العقار  ، وذلك بأي من برامج المرابحة أو الإجارة المنتهية بالتمليك المعتمدة من الهيئات الشرعية لدى البنوك والجهات التمويلية،ولخبرة الطرف الاول فقد اوكل الطرف الثاني هذي المهمة.
ولما كان الطرف الثاني يرغب في تملّك العقار حدده الطرف الثاني، فقد قام الطرف الأول بتسهيل كل ما من شأنه حصول الطرف الثاني على العقار المطلوب، وذلك بعمل جميع الإجراءات والمفاوضات مع مالك العقار، والجهات الممولة ومعرفة عروضها والحلول الممكنة لإنجاز الطرف الثاني، والجهات المقيمة للعقار لسرعة التقييم .

وعليه فقد اتفق الطرفان – بكامل الأهلية الشرعية والنظامية – على ما يلي:

⸻

البنود:

1. يعتبر التمهيد المذكور أعلاه جزء لا يتجزأ من هذا العقد ويُقرأ معه ويفسّر كوحدة واحدة.

2. يقوم الطرف الأول بإتمام جميع الإجراءات والمفاوضات المتعلقة بالعقار المحدد من قبل الطرف الثاني، لإتمام الصفقة لصالح الطرف الثاني من الجهة التمويلية المعتمدة لدى الطرف الأول.

3. يلتزم الطرف الثاني بدفع مبلغ قدره نسبة2.5% قيمة العقار+500﷼ رسوم عقد ريال للطرف الأول،  مقابل قيام الطرف الأول بالوفاء بجميع التزاماته.

4. في حال عدم إتمام الصفقة لسبب لا يعود للطرف الثاني، مثل رجوع مالك العقار عن البيع، أو ظهور عيوب في العقار، أو عدم موافقة البنك، فإن الطرف الأول يلتزم بإعادة المبلغ المدفوع للطرف الثاني اذا كان مدفوع مقدما بسند قبض او بيصال من البنك.

5. في حال رجوع الطرف الثاني عن إبرام الصفقة لأي سبب يعود له، فإن المبلغ المدفوع للطرف الأول يُعد مستحقًا ويُطالب الطرف الثاني بالوفاء به كاملًا.

6. في حال مماطلة الطرف الثاني أو تأخره عن الحضور أو التوقيع، مما يُضِر بالمالك ويجعله يبيع العقار لطرف آخر او يتغير عرض الجهة الممولة، فإن المبلغ المدفوع للطرف الأول يُعد من حقه، لأن عدم إتمام الصفقة جاء بسبب الطرف الثاني.

7. يلتزم الطرف الثاني بعدم إخفاء أي معلومات يعلم أنها تُعيق المعاملة، مثل وجود التزامات أو مشاكل على العقار، أو وجود متعثرات او  إيقافات او اللتزمات لم يذكرها وموجودة في (سمة)، أو تقديم طلب تمويل سابق مرفوض.

8. يلتزم الطرف الثاني بتحويل راتبه إلى البنك المحدد لاحقًا إن دعت الحاجة لذلك.

9. بعد موافقة المالك والبنك وإتمام البيع، تنتهي علاقة الطرف الثاني بالطرف الأول، وتصبح العلاقة مباشرة مع الجهة التمويلية.

10. العناوين المدونة في صدر هذا العقد تُعد معتمدة للمراسلات والإشعارات بين الطرفين.

11. في حال حدوث نزاع – لا سمح الله – ولم يتم حله وديًا خلال 10 أيام، يُحال إلى المحكمة المختصة بمدينة الرياض.

12. حُرر هذا العقد من نسختين أصليتين، بيد كل طرف نسخة للعمل بموجبها، وقد تفاهم الطرفان على حسن التعامل، وإعطاء كل ذي حق حقه.

⸻

توقيع الطرفين:

الطرف الأول:
  الوساطة العقارية والتسويق
الاسم: مدير الادارة /نايف المطيري……………………………………………………..
التوقيع: تم الموافقة على هذا العقد و التوقيع من قبله بتاريخ
${formatDate(approvalDate)}

الطرف الثاني:
الاسم: ${window.clientName}
التوقيع: ………………………………………………….
⸻

الفوتر:

تنبيه
هذا العقد يُعد سندًا تنفيذيًا كما نصّت عليه المادة (9) من نظام التعاملات الإلكترونية`;

    document.getElementById('contractText').textContent = contractText;
    document.getElementById('noticeText').textContent = `تمت الموافقة من الطرف الأول بتاريخ:\n${formatDate(approvalDate)}`;
    showPage('page3');
  });

  // الصفحة 3 -> 4
  document.getElementById('toApproveBtn').addEventListener('click', () => {
    showPage('page4');
    document.getElementById('confirmId').focus();
  });

  // الصفحة 4 تحقق صحة البيانات قبل الانتقال للصفحة النهائية
  document.getElementById('finalizeBtn').addEventListener('click', () => {
    const confirmId = document.getElementById('confirmId').value.trim();
    const approvalText = document.getElementById('approvalText').value.trim();
    const errorMsg = document.getElementById('errorMsg');
    errorMsg.textContent = '';

    if (!/^\d{10}$/.test(confirmId)) {
      errorMsg.textContent = 'رقم الهوية يجب أن يكون مكونًا من 10 أرقام.';
      return;
    }
    if (approvalText !== 'موافق') {
      errorMsg.textContent = 'الرجاء كتابة كلمة "موافق" بشكل صحيح.';
      return;
    }

    showPage('page5');
  });

  function formatDate(d) {
    const days = ['الأحد', 'الاثنين', 'الثلاثاء', 'الأربعاء', 'الخميس', 'الجمعة', 'السبت'];
    const dayName = days[d.getDay()];
    const date = d.toLocaleDateString('ar-SA', {year: 'numeric', month: '2-digit', day: '2-digit'});
    const time = d.toLocaleTimeString('ar-SA', {hour12: false});
    return `اليوم: ${dayName} - التاريخ: ${date} - الوقت: ${time}`;
  }
</script>

</body>
</html>