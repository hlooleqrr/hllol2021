<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>عرض العقد</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: 'Tajawal', sans-serif;
      background-color: #f9fafb;
      margin: 0;
      padding: 0;
      color: #004d40;
    }
    .contract-container {
      max-width: 750px;
      margin: 20px auto;
      padding: 30px;
      background: white;
      border: 3px solid #004d40;
      border-radius: 16px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
      overflow-y: auto;
    }
    h1, h2 {
      text-align: center;
      margin-bottom: 20px;
    }
    h1 {
      font-size: 26px;
      color: #004d40;
    }
    h2 {
      font-size: 20px;
      color: #00796b;
    }
    .contract-text {
      line-height: 2;
      font-size: 17px;
      white-space: pre-wrap;
    }
    .highlight {
      color: red;
      font-weight: bold;
      text-align: center;
      margin-top: 30px;
    }
    .footer {
      background: #eeeeee;
      padding: 15px;
      font-size: 14px;
      text-align: center;
      border-top: 2px solid #004d40;
      margin-top: 30px;
    }
  </style>
</head>
<body onload="renderContract(); getLocation();">

<div class="contract-container">
  <h1>شركة سرعة تملك العقار والحلول التمويلية المتكاملة</h1>
  <h2>عقد اتفاقية إنهاء إجراءات تمويل عقاري</h2>

  <div class="contract-text" id="contractBody">
    <!-- سيتم تعبئته عبر الجافاسكربت -->
  </div>

  <div class="highlight">
    تنبيه: يخضع هذا العقد لأحكام نظام التعاملات الإلكترونية السعودي، ويُعد ملزمًا من لحظة الموافقة.
  </div>

  <div class="footer">
    <div><strong>شركة سرعة تملك العقار</strong></div>
    <div id="datetime"></div>
    <div id="geoLocation">جاري تحديد موقع العميل...</div>
  </div>
</div>

<script>
function renderContract() {
  const name = localStorage.getItem("clientName") || "...............";
  const id = localStorage.getItem("clientId") || "...............";
  const mobile = localStorage.getItem("clientMobile") || "...............";
  const year = localStorage.getItem("birthYear") || "........";
  const month = localStorage.getItem("birthMonth") || "..";
  const day = localStorage.getItem("birthDay") || "..";

  const contract = `
تم بحمد الله الاتفاق بين شركة سرعة تملك العقار والطرف الثاني حسب البيانات التالية:

الاسم: ${name}
رقم الهوية: ${id}
رقم الجوال: ${mobile}
تاريخ الميلاد (هجري): ${day} / ${month} / ${year}

بموجب هذا العقد، يتم إنهاء إجراءات التمويل العقاري عبر جهة تمويلية معتمدة، ويشمل ذلك مراجعة المستندات وتحديث البيانات.

يتعهد الطرف الثاني بدفع الرسوم المحددة عند توقيع هذا العقد أو عند صدور الموافقة المبدئية من الجهة التمويلية.

مدة العقد: تبدأ من تاريخ توقيع العقد وتستمر حتى الانتهاء من كامل الإجراءات أو الانسحاب بموجب إشعار رسمي.

العنوان الرسمي للطرف الأول:
شركة سرعة تملك العقار والحلول التمويلية المتكاملة
ترخيص: 1100042624
الرياض

تم إبرام هذا العقد إلكترونيًا، ويُعتبر ساريًا نظامًا حسب المادة (2) من نظام التعاملات الإلكترونية السعودي.
  `;

  document.getElementById("contractBody").innerText = contract;

  // تحديث التاريخ والوقت
  const now = new Date();
  const dateStr = now.toLocaleDateString('ar-SA');
  const timeStr = now.toLocaleTimeString('ar-SA');
  document.getElementById("datetime").innerText = `التاريخ والوقت: ${dateStr} - ${timeStr}`;
}

// الموقع الجغرافي
function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
      const lat = position.coords.latitude.toFixed(5);
      const lon = position.coords.longitude.toFixed(5);
      document.getElementById("geoLocation").innerText =
        `موقع العميل: خط العرض ${lat} - خط الطول ${lon}`;
    }, function() {
      document.getElementById("geoLocation").innerText = "تعذر تحديد الموقع الجغرافي.";
    });
  } else {
    document.getElementById("geoLocation").innerText = "الموقع غير مدعوم.";
  }
}
</script>

</body>
</html>