<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>قراءة العقد</title>
  <style>
    body {
      font-family: 'Tajawal', sans-serif;
      background-color: #fff8e1;
      margin: 0;
      padding: 30px;
      color: #4e342e;
      line-height: 2;
      min-height: 100vh;
    }
    .contract-box {
      border: 2px solid #4e342e;
      border-radius: 12px;
      padding: 20px;
      background-color: #fffde7;
    }
    .next-btn {
      margin-top: 30px;
      background-color: #6d4c41;
      color: white;
      border: none;
      padding: 12px 28px;
      font-size: 18px;
      border-radius: 8px;
      cursor: pointer;
    }
    .next-btn:hover {
      background-color: #8d6e63;
    }

    .legal-box {
      background-color: #fff3f3;
      border: 2px solid #e53935;
      border-radius: 12px;
      padding: 16px;
      margin: 40px auto 10px;
      max-width: 90%;
      text-align: right;
      font-size: 15px;
      color: #333;
    }
    .legal-box h3 {
      margin: 0 0 10px;
      font-size: 18px;
      color: #004d40;
    }
    .legal-box .warning {
      color: #b71c1c;
      font-weight: bold;
      margin: 8px 0;
    }
  </style>
</head>
<body>

  <h2>عزيزي العميل، يرجى قراءة بنود العقد التالية:</h2>

  <div class="contract-box" id="contractContent">
    <p>بسم الله الرحمن الرحيم</p>
    <p>المملكة العربية السعودية</p>
    <p>شركة الوساطة العقارية والتسويق - ترخيص رقم 1100042624</p>
    <p>الطرف الأول: الأستاذ نايف المطيري بصفته مدير الإدارة.</p>
    <p>الطرف الثاني: <span id="clientName"></span>، سجل مدني: <span id="clientId"></span>.</p>
    <p>رقم الجوال: <span id="clientPhone"></span></p>
    <p>تاريخ الميلاد: <span id="clientBirth"></span></p>

    <ol>
      <li>يلتزم الطرف الأول بتقديم الخدمات التمويلية حسب المتفق عليه.</li>
      <li>يدفع الطرف الثاني للطرف الأول ٢.٥٪ من قيمة العقار + ٥٠٠ ريال رسوم إدارية.</li>
      <li>يتم احتساب القيمة المعتمدة حسب جهة التمويل.</li>
      <li>يتم التعامل بسرية تامة لحفظ بيانات العميل.</li>
      <li>لا يحق للطرف الثاني المطالبة بالمبلغ المدفوع بعد توقيع العقد.</li>
      <li>في حال تعذر إتمام التمويل لأسباب غير متعلقة بالطرف الأول، لا يتم استرجاع الرسوم.</li>
      <li>الطرف الثاني مسؤول عن صحة البيانات المقدمة.</li>
      <li>العقد ساري المفعول حتى إتمام عملية التمويل أو الإلغاء بالتراضي.</li>
      <li>لا يُعتبر هذا العقد وسيلة ضغط على أي جهة تمويلية.</li>
      <li>الطرف الأول غير مسؤول عن رفض الجهات التمويلية.</li>
      <li>يتم إبرام العقد إلكترونيًا ويُعتمد بتاريخ توقيعه.</li>
      <li>تُطبق على هذا العقد الأنظمة المعمول بها في المملكة العربية السعودية.</li>
    </ol>

    <p>وبهذا تم الاتفاق بين الطرفين على جميع ما ورد أعلاه.</p>
  </div>

  <button class="next-btn" onclick="goToNext()">التالي</button>

  <div class="legal-box">
    <h3>شركة سرعة تملك العقار والحلول التمويلية المتكاملة</h3>
    <p class="warning">
      ⛔️ تنبيه قانوني: يخضع هذا العقد للمادة التاسعة من نظام التعاملات الإلكترونية في المملكة العربية السعودية، ويُعد التفاعل مع هذا الموقع بمثابة موافقة صريحة على كافة البنود، وله حجية نظامية كاملة في الإثبات أمام الجهات الرسمية والقضائية.
    </p>
    <p id="location">📍 موقع الدخول: يتم تحديده...</p>
    <p id="datetime">🕒 التاريخ والوقت: جاري التحميل...</p>
  </div>

  <script>
    document.getElementById("clientName").innerText = localStorage.getItem("clientName") || "الاسم غير متوفر";
    document.getElementById("clientId").innerText = localStorage.getItem("clientId") || "غير متوفر";
    document.getElementById("clientPhone").innerText = localStorage.getItem("clientPhone") || "غير متوفر";
    document.getElementById("clientBirth").innerText = localStorage.getItem("clientBirth") || "غير متوفر";

    function goToNext() {
      window.location.href = "step5.html";
    }

    const dtBox = document.getElementById("datetime");
    const now = new Date();
    const formatted = now.toLocaleString('ar-SA', {
      year: 'numeric',
      month: '2-digit',
      day: '2-digit',
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit',
      hour12: true
    });
    dtBox.textContent = "🕒 التاريخ والوقت: " + formatted;

    const locBox = document.getElementById("location");
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(pos => {
        locBox.textContent = `📍 موقع الدخول: خط العرض ${pos.coords.latitude.toFixed(4)}, خط الطول ${pos.coords.longitude.toFixed(4)}`;
      }, () => {
        locBox.textContent = "📍 موقع الدخول: غير محدد (تم رفض الوصول للموقع)";
      });
    } else {
      locBox.textContent = "📍 موقع الدخول: غير مدعوم في هذا المتصفح";
    }
  </script>

</body>
</html>